# DevOps Roadmap ะฟัะพะตะบัะฐ HomeGuru

## ะ DevOps

**ะฆะตะปั:** ะะฒัะพะผะฐัะธะทะฐัะธั ะฟัะพัะตััะพะฒ ัะฑะพัะบะธ, ัะฐะทะฒะตัััะฒะฐะฝะธั ะธ ะดะพััะฐะฒะบะธ ะฟัะธะปะพะถะตะฝะธั ะฝะฐ production ัะตัะฒะตั ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Docker, Docker Compose ะธ GitHub Actions.

**ะะพะดัะพะด:** MVP DevOps - ะผะฐะบัะธะผะฐะปัะฝะพ ะฑัััััะน ะฟััั ะพั ะปะพะบะฐะปัะฝะพะณะพ ะทะฐะฟััะบะฐ ะดะพ ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ัะฐะทะฒะตัััะฒะฐะฝะธั ะฝะฐ ัะดะฐะปะตะฝะฝะพะผ ัะตัะฒะตัะต. ะคะพะบัั ะฝะฐ ะฟัะพััะพัะต ะธ ัะบะพัะพััะธ ะฑะตะท ะฟัะตะถะดะตะฒัะตะผะตะฝะฝะพะน ะพะฟัะธะผะธะทะฐัะธะธ.

**ะะปััะตะฒัะต ะดะพะบัะผะตะฝัั:**
- [๐ฏ vision.md](../../docs/vision.md) - ะขะตัะฝะธัะตัะบะพะต ะฒะธะดะตะฝะธะต ะฒัะตะณะพ ะฟัะพะตะบัะฐ
- [๐บ๏ธ roadmap.md](../../docs/roadmap.md) - ะัะฝะพะฒะฝะพะน roadmap ะฟัะพะตะบัะฐ
- [๐ frontend-roadmap.md](../../frontend/doc/frontend-roadmap.md) - Frontend roadmap

---

## ะะตะณะตะฝะดะฐ ััะฐัััะพะฒ

| ะะบะพะฝะบะฐ | ะกัะฐััั | ะะฟะธัะฐะฝะธะต |
|--------|--------|----------|
| โณ | Pending | ะกะฟัะธะฝั ะทะฐะฟะปะฐะฝะธัะพะฒะฐะฝ, ัะฐะฑะพัะฐ ะฝะต ะฝะฐัะฐัะฐ |
| ๐ง | In Progress | ะกะฟัะธะฝั ะฒ ะฐะบัะธะฒะฝะพะน ัะฐะทัะฐะฑะพัะบะต |
| โ | Completed | ะกะฟัะธะฝั ััะฟะตัะฝะพ ะทะฐะฒะตััะตะฝ |
| ๐ | On Hold | ะกะฟัะธะฝั ะฟัะธะพััะฐะฝะพะฒะปะตะฝ |
| โ | Cancelled | ะกะฟัะธะฝั ะพัะผะตะฝะตะฝ |

---

## ะกะฟัะธะฝัั DevOps ัะฐะทัะฐะฑะพัะบะธ

| ะะพะด | ะะฐะทะฒะฐะฝะธะต | ะกัะฐััั | ะะปะฐะฝ ัะฟัะธะฝัะฐ |
|-----|----------|--------|--------------|
| **D-Sprint-0** | Basic Docker Setup | โ Completed | [๐ D-Sprint-0 Plan](plans/d0-basic-docker-setup.md) |
| **D-Sprint-1** | Build & Publish | ๐ง In Progress | [๐ D-Sprint-1 Plan](plans/d1-build-publish.md) |
| **D-Sprint-2** | ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ ัะตัะฒะตั | โณ Pending | *TBD* |
| **D-Sprint-3** | Auto Deploy | โณ Pending | *TBD* |

---

## D-Sprint-0: Basic Docker Setup

### ะฆะตะปั
ะะฐะฟัััะธัั ะฒัะต ัะตัะฒะธัั ะฟัะพะตะบัะฐ ะปะพะบะฐะปัะฝะพ ัะตัะตะท docker-compose ะพะดะฝะพะน ะบะพะผะฐะฝะดะพะน.

### ะกะพััะฐะฒ ัะฐะฑะพั
**Docker ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั:**
- ะกะพะทะดะฐะฝะธะต `Dockerfile.bot` ะดะปั Telegram ะฑะพัะฐ (Python + UV)
- ะกะพะทะดะฐะฝะธะต `Dockerfile.api` ะดะปั FastAPI ัะตัะฒะธัะฐ (Python + UV)
- ะกะพะทะดะฐะฝะธะต `Dockerfile.frontend` ะดะปั ะฒะตะฑ-ะธะฝัะตััะตะนัะฐ (Next.js + pnpm)
- ะกะพะทะดะฐะฝะธะต `.dockerignore` ัะฐะนะปะพะฒ ะดะปั ะบะฐะถะดะพะณะพ ัะตัะฒะธัะฐ

**Docker Compose ะพัะบะตัััะฐัะธั:**
- ะะฑะฝะพะฒะปะตะฝะธะต `docker-compose.yml` ะดะปั 4 ัะตัะฒะธัะพะฒ: PostgreSQL, Bot, API, Frontend
- ะะฐัััะพะนะบะฐ ัะตัะตะฒัั ัะฒัะทะตะน ะผะตะถะดั ัะตัะฒะธัะฐะผะธ
- ะะพะฝัะธะณััะฐัะธั ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
- ะะฐัััะพะนะบะฐ volume mounts ะดะปั ะฟะตััะธััะตะฝัะฝะพััะธ ะดะฐะฝะฝัั

**ะะฝััะฐััััะบัััะฐ:**
- ะัะพะฒะตัะบะฐ ัะฐะฑะพัะพัะฟะพัะพะฑะฝะพััะธ: `docker-compose up` - ะฒัั ัะฐะฑะพัะฐะตั ะปะพะบะฐะปัะฝะพ
- ะะฑะฝะพะฒะปะตะฝะธะต `README.md` ั ะธะฝััััะบัะธัะผะธ ะฟะพ ะทะฐะฟััะบั ัะตัะตะท Docker
- ะะพะบัะผะตะฝัะฐัะธั ะฟะพ ะฟะตัะตะผะตะฝะฝัะผ ะพะบััะถะตะฝะธั

**ะะพะฝัะตะบัั ะฟัะพะตะบัะฐ:**
- ะ ะฟัะพะตะบัะต ัะถะต ัััะตััะฒัะตั `docker-compose.yml` ะดะปั PostgreSQL
- ะััั ัะฐะนะป `.env` ั ะบะพะฝัะธะณััะฐัะธะตะน ะฑะฐะทั ะดะฐะฝะฝัั
- ะะตะพะฑัะพะดะธะผะพ ัะฐััะธัะธัั ัััะตััะฒััััั ะบะพะฝัะธะณััะฐัะธั

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
ะะพะผะฐะฝะดะฐ `docker-compose up` ะทะฐะฟััะบะฐะตั ะฒัะต 4 ัะตัะฒะธัะฐ, ะพะฝะธ ะบะพััะตะบัะฝะพ ะฒะทะฐะธะผะพะดะตะนััะฒััั ะผะตะถะดั ัะพะฑะพะน, ะฟัะธะปะพะถะตะฝะธะต ะฟะพะปะฝะพัััั ััะฝะบัะธะพะฝะฐะปัะฝะพ.

---

## D-Sprint-1: Build & Publish

### ะฆะตะปั
ะะฒัะพะผะฐัะธัะตัะบะฐั ัะฑะพัะบะฐ ะธ ะฟัะฑะปะธะบะฐัะธั Docker ะพะฑัะฐะทะพะฒ ะฒ GitHub Container Registry ะฟัะธ ะบะฐะถะดะพะผ push ะฒ main ะฒะตัะบั.

### ะกะพััะฐะฒ ัะฐะฑะพั
**GitHub Actions workflow:**
- ะกะพะทะดะฐะฝะธะต `.github/workflows/build.yml`
- Trigger: push ะฒ main ะฒะตัะบั
- Jobs: ัะฑะพัะบะฐ ะพะฑัะฐะทะพะฒ ะดะปั bot, api, frontend
- ะัะฑะปะธะบะฐัะธั ะพะฑัะฐะทะพะฒ ะฒ `ghcr.io` ั ัะตะณะพะผ `latest`
- ะะฟัะธะผะธะทะฐัะธั: ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะบััะฐ ัะปะพะตะฒ Docker

**ะะฐัััะพะนะบะฐ GitHub Container Registry:**
- ะกะพะทะดะฐะฝะธะต ะธะฝััััะบัะธะธ ะฟะพ ะฝะฐัััะพะนะบะต permissions ะดะปั GHCR
- ะะพะบัะผะตะฝัะฐัะธั ะฟะพ ัะฟัะฐะฒะปะตะฝะธั ัะพะบะตะฝะฐะผะธ ะดะพัััะฟะฐ
- Best practices ะดะปั ัะฐะฑะพัั ั ะฟัะธะฒะฐัะฝัะผะธ ะพะฑัะฐะทะฐะผะธ

**ะะฐัะตััะฒะพ ะธ ะผะพะฝะธัะพัะธะฝะณ:**
- ะะพะฑะฐะฒะปะตะฝะธะต badges ััะฐัััะฐ ัะฑะพัะบะธ ะฒ README
- ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ััะฐัััะต ัะฑะพัะบะธ (success/failure)
- ะะตััะธะพะฝะธัะพะฒะฐะฝะธะต ะพะฑัะฐะทะพะฒ (latest + SHA commit)

**ะะพะบัะผะตะฝัะฐัะธั:**
- ะัะบะพะฒะพะดััะฒะพ `doc/guides/github-registry-setup.md`
- ะะฑะฝะพะฒะปะตะฝะธะต `README.md` ั badges ะธ ัััะปะบะฐะผะธ ะฝะฐ ะพะฑัะฐะทั

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
ะะพัะปะต push ะฒ main ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะพะฑะธัะฐัััั ะธ ะฟัะฑะปะธะบััััั 3 Docker ะพะฑัะฐะทะฐ ะฒ GHCR, ะดะพัััะฟะฝัะต ะดะปั pull ะฝะฐ ะปัะฑะพะผ ัะตัะฒะตัะต.

---

## D-Sprint-2: ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ ัะตัะฒะตั

### ะฆะตะปั
ะกะพะทะดะฐัั ะฟะพัะฐะณะพะฒัั ะธะฝััััะบัะธั ะดะปั ัััะฝะพะณะพ ัะฐะทะฒะตัััะฒะฐะฝะธั ะฟัะธะปะพะถะตะฝะธั ะฝะฐ ัะดะฐะปะตะฝะฝะพะผ production ัะตัะฒะตัะต.

### ะกะพััะฐะฒ ัะฐะฑะพั
**ะะพะดะณะพัะพะฒะบะฐ production ะพะบััะถะตะฝะธั:**
- ะกะพะทะดะฐะฝะธะต `.env.production` ัะฐะฑะปะพะฝะฐ ั ะพะฟะธัะฐะฝะธะตะผ ะฒัะตั ะฟะตัะตะผะตะฝะฝัั
- ะะพะบัะผะตะฝัะฐัะธั ััะตะฑะพะฒะฐะฝะธะน ะบ ัะตัะฒะตัั (OS, Docker, SSH)
- ะะฐัััะพะนะบะฐ SSH ะบะปััะตะน ะดะปั ะฑะตะทะพะฟะฐัะฝะพะณะพ ะฟะพะดะบะปััะตะฝะธั

**ะะพัะฐะณะพะฒะฐั ะธะฝััััะบัะธั ะดะตะฟะปะพั:**
- SSH ะฟะพะดะบะปััะตะฝะธะต ะบ ัะตัะฒะตัั ั ะฟะพะผะพััั SSH ะบะปััะฐ
- ะะพะฟะธัะพะฒะฐะฝะธะต `docker-compose.yml` ะธ `.env` ะฝะฐ ัะตัะฒะตั
- `docker login` ะบ ghcr.io (ะฐััะตะฝัะธัะธะบะฐัะธั)
- `docker-compose pull` - ะทะฐะณััะทะบะฐ ะพะฑัะฐะทะพะฒ ะธะท registry
- `docker-compose up -d` - ะทะฐะฟััะบ ัะตัะฒะธัะพะฒ ะฒ ัะพะฝะพะฒะพะผ ัะตะถะธะผะต
- ะะฐะฟััะบ ะผะธะณัะฐัะธะน ะฑะฐะทั ะดะฐะฝะฝัั (Alembic)
- ะัะพะฒะตัะบะฐ ัะฐะฑะพัะพัะฟะพัะพะฑะฝะพััะธ ะบะฐะถะดะพะณะพ ัะตัะฒะธัะฐ

**ะกะบัะธะฟัั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ:**
- `scripts/deploy-check.sh` - ัะบัะธะฟั ะฟัะพะฒะตัะบะธ ััะฐัััะฐ ะฒัะตั ัะตัะฒะธัะพะฒ
- Health checks ะดะปั bot, api, frontend, database
- ะัะพัะผะพัั ะปะพะณะพะฒ ะธ troubleshooting

**ะะพะบัะผะตะฝัะฐัะธั:**
- ะะตัะฐะปัะฝะพะต ััะบะพะฒะพะดััะฒะพ `doc/guides/manual-deploy.md`
- ะงะตะบ-ะปะธัั ัะฐะทะฒะตัััะฒะฐะฝะธั
- ะขะธะฟะธัะฝัะต ะฟัะพะฑะปะตะผั ะธ ะธั ัะตัะตะฝะธั

**ะะพะฝัะตะบัั:**
ะะพัะพะฒัะน ัะตัะฒะตั ะฟัะตะดะพััะฐะฒะปะตะฝ (ะฐะดัะตั + SSH ะบะปัั, Docker ัะถะต ัััะฐะฝะพะฒะปะตะฝ).

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
ะกะปะตะดัั ะธะฝััััะบัะธะธ, ะปัะฑะพะน ัะฐะทัะฐะฑะพััะธะบ ะผะพะถะตั ะฒัััะฝัั ัะฐะทะฒะตัะฝััั ะฟัะธะปะพะถะตะฝะธะต ะฝะฐ production ัะตัะฒะตัะต ะทะฐ 15-20 ะผะธะฝัั.

---

## D-Sprint-3: Auto Deploy

### ะฆะตะปั
ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต ะฟัะธะปะพะถะตะฝะธั ะฝะฐ production ัะตัะฒะตั ัะตัะตะท GitHub Actions ะฟะพ ะฝะฐะถะฐัะธั ะบะฝะพะฟะบะธ (manual trigger).

### ะกะพััะฐะฒ ัะฐะฑะพั
**GitHub Actions workflow:**
- ะกะพะทะดะฐะฝะธะต `.github/workflows/deploy.yml`
- Trigger: `workflow_dispatch` (ัััะฝะพะน ะทะฐะฟััะบ ัะตัะตะท UI GitHub)
- SSH ะฟะพะดะบะปััะตะฝะธะต ะบ ัะตัะฒะตัั ัะตัะตะท GitHub Secrets
- Pull ะฝะพะฒัั ะฒะตััะธะน ะพะฑัะฐะทะพะฒ ั GHCR
- Restart ัะตัะฒะธัะพะฒ ัะตัะตะท `docker-compose restart`
- ะะฐะฟััะบ ะผะธะณัะฐัะธะน ะฑะฐะทั ะดะฐะฝะฝัั (ะตัะปะธ ะฝัะถะฝะพ)

**ะะฐัััะพะนะบะฐ GitHub Secrets:**
- `SSH_KEY` - ะฟัะธะฒะฐัะฝัะน SSH ะบะปัั ะดะปั ะฟะพะดะบะปััะตะฝะธั
- `SSH_HOST` - ะฐะดัะตั production ัะตัะฒะตัะฐ
- `SSH_USER` - ะฟะพะปัะทะพะฒะฐัะตะปั ะดะปั SSH
- ะะฝััััะบัะธั ะฟะพ ะดะพะฑะฐะฒะปะตะฝะธั secrets ะฒ ัะตะฟะพะทะธัะพัะธะน

**ะฃะฒะตะดะพะผะปะตะฝะธั ะธ ะผะพะฝะธัะพัะธะฝะณ:**
- ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ััะฐัััะต ะดะตะฟะปะพั (success/failure)
- Slack/Telegram ัะฒะตะดะพะผะปะตะฝะธั (ะพะฟัะธะพะฝะฐะปัะฝะพ)
- Rollback ัััะฐัะตะณะธั ะฟัะธ ะพัะธะฑะบะฐั
- ะะพะณะธัะพะฒะฐะฝะธะต ะฟัะพัะตััะฐ ะดะตะฟะปะพั

**ะะพะบัะผะตะฝัะฐัะธั:**
- ะัะบะพะฒะพะดััะฒะพ `doc/guides/auto-deploy-setup.md`
- ะะฐัััะพะนะบะฐ GitHub secrets ะฟะพัะฐะณะพะฒะพ
- ะะฑะฝะพะฒะปะตะฝะธะต `README.md` ั ะบะฝะพะฟะบะพะน "Deploy to Production"

**ะะตะทะพะฟะฐัะฝะพััั:**
- Best practices ะดะปั SSH ะบะปััะตะน
- ะะพัะฐัะธั credentials
- Audit log ะดะปั ะดะตะฟะปะพะตะฒ

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
ะะฐะถะฐัะธะต ะบะฝะพะฟะบะธ "Run workflow" ะฒ GitHub Actions ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะฐะทะฒะตัััะฒะฐะตั ะฟะพัะปะตะดะฝัั ะฒะตััะธั ะฟัะธะปะพะถะตะฝะธั ะฝะฐ production ัะตัะฒะตัะต ะทะฐ 3-5 ะผะธะฝัั.

---

## ะััะธัะตะบัััะฐ MVP DevOps Pipeline

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Developer Push to Main                                         โ
โโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                      โ
                      โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  D-Sprint-1: GitHub Actions - Build & Publish                  โ
โ  โข Build Docker images (bot, api, frontend)                    โ
โ  โข Push to ghcr.io with tag latest                             โ
โโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                      โ
                      โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  GitHub Container Registry (ghcr.io)                            โ
โ  โข ghcr.io/username/homeguru-bot:latest                         โ
โ  โข ghcr.io/username/homeguru-api:latest                         โ
โ  โข ghcr.io/username/homeguru-frontend:latest                    โ
โโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                      โ
                      โผ (Manual Trigger)
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  D-Sprint-3: GitHub Actions - Auto Deploy                      โ
โ  โข SSH to production server                                     โ
โ  โข docker-compose pull                                          โ
โ  โข docker-compose restart                                       โ
โ  โข Run migrations                                               โ
โโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                      โ
                      โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Production Server                                               โ
โ  โข PostgreSQL (port 5432)                                       โ
โ  โข Bot (connects to DB + Telegram API)                         โ
โ  โข API (FastAPI on port 8000)                                  โ
โ  โข Frontend (Next.js on port 3000)                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

| ะะพะผะฟะพะฝะตะฝั | ะขะตัะฝะพะปะพะณะธั | ะะฐะทะฝะฐัะตะฝะธะต |
|-----------|------------|------------|
| **ะะพะฝัะตะนะฝะตัะธะทะฐัะธั** | Docker | ะะทะพะปััะธั ะธ ัะฟะฐะบะพะฒะบะฐ ะฟัะธะปะพะถะตะฝะธะน |
| **ะัะบะตัััะฐัะธั** | Docker Compose | ะฃะฟัะฐะฒะปะตะฝะธะต multi-container ะฟัะธะปะพะถะตะฝะธะตะผ |
| **CI/CD** | GitHub Actions | ะะฒัะพะผะฐัะธะทะฐัะธั ัะฑะพัะบะธ ะธ ะดะตะฟะปะพั |
| **Registry** | GitHub Container Registry (ghcr.io) | ะฅัะฐะฝะตะฝะธะต Docker ะพะฑัะฐะทะพะฒ |
| **Deployment** | SSH + docker-compose | ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ production ัะตัะฒะตัะต |
| **Database** | PostgreSQL 16 | ะะตััะธััะตะฝัะฝะพััั ะดะฐะฝะฝัั |

---

## ะััะพัะธั ะธะทะผะตะฝะตะฝะธะน

| ะะฐัะฐ | ะะตััะธั | ะะทะผะตะฝะตะฝะธั |
|------|--------|-----------|
| 2025-10-18 | 1.2 | D-Sprint-1 ะฝะฐัะฐั. GitHub Actions workflow, docker-compose.prod.yml, ะดะพะบัะผะตะฝัะฐัะธั ะฟะพ GHCR, ะพะฑะฝะพะฒะปะตะฝะธะต README |
| 2025-10-18 | 1.1 | D-Sprint-0 ะทะฐะฒะตััะตะฝ. ะะพะฝัะตะนะฝะตัะธะทะฐัะธั ะฒัะตั ัะตัะฒะธัะพะฒ, docker-compose ั 4 ัะตัะฒะธัะฐะผะธ, ะพะฑะฝะพะฒะปะตะฝะธะต README.md |
| 2025-10-18 | 1.0 | ะกะพะทะดะฐะฝะธะต DevOps roadmap. ะะปะฐะฝะธัะพะฒะฐะฝะธะต ัะฟัะธะฝัะพะฒ D-Sprint-0 ะดะพ D-Sprint-3 |


